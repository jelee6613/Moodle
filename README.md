# MOODLE, ë‹¹ì‹ ë§Œì˜ ì˜í™” ê°ë…ì„ ì°¾ì•„ë³´ì„¸ìš”!

- ì‚¼ì„± ì²­ë…„ SWì•„ì¹´ë°ë¯¸ ê´€í†µí”„ë¡œì íŠ¸ ìµœìš°ìˆ˜ìƒğŸ†
- 2022ë…„ 5ì›” 17ì¼ ~ 2022ë…„ 5ì›” 26ì¼


![MOODLE.png](assets/ë©”ì¸.png)

<span>
<img src="https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=Python&logoColor=white">
<img src="https://img.shields.io/badge/Django-000000?style=for-the-badge&logo=Django&logoColor=white">
<img src="https://img.shields.io/badge/sqlite-003B57?style=for-the-badge&logo=sqlite&logoColor=white">
</span>
<br>
<span>
<img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
<img src="https://img.shields.io/badge/vue.js-4FC08D?style=for-the-badge&logo=vue.js&logoColor=white">
<img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white">
<img src="https://img.shields.io/badge/css3-1572B6?style=for-the-badge&logo=css3&logoColor=white">
<img src="https://img.shields.io/badge/bootstrap-7952B3?style=for-the-badge&logo=bootstrap&logoColor=white">
</span>
<br>
<span>
<img src="https://img.shields.io/badge/GitLab-FCA121?style=for-the-badge&logo=GitLab&logoColor=white">
<img src="https://img.shields.io/badge/Mattermost-0058CC?style=for-the-badge&logo=Mattermost&logoColor=white">
<img src="https://img.shields.io/badge/visual studio code-007ACC?style=for-the-badge&logo=visualstudiocode&logoColor=white">
</span>

<br>

## ëª©ì°¨

1ï¸âƒ£ <a href="#1ï¸âƒ£-ê°œìš”">ê°œìš”</a>

2ï¸âƒ£ <a href="#2ï¸âƒ£-ê¸°ì—¬ë„">ê¸°ì—¬ë„</a>

3ï¸âƒ£ <a href="#3ï¸âƒ£-ì„¤ê³„">ì„¤ê³„</a>

4ï¸âƒ£ <a href="#4ï¸âƒ£-ì‹œì—°">ì‹œì—°</a>

5ï¸âƒ£ <a href="#5ï¸âƒ£-ê°œë°œì">ê°œë°œì</a>

6ï¸âƒ£ <a href="#6ï¸âƒ£-íšŒê³ ">íšŒê³ </a>


<br>

## 1ï¸âƒ£ ê°œìš”

- TMDB APIë¥¼ ì´ìš©í•´ ì˜í™” ì •ë³´ë¥¼ ë¶ˆëŸ¬ì™€ ì˜í™” ë°ì´í„°ë¥¼ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ê³  ì¶”ì²œë„ í•´ì¤˜ìš”!
- ê°„ë‹¨í•œ í€´ì¦ˆë¥¼ ì½ê³  í•´ë‹¹í•˜ëŠ” ë³´ê¸°ë¥¼ ê³ ë¥´ë©´ ë‹¹ì‹ ê³¼ ë¹„ìŠ·í•œ ì„±í–¥ì˜ ê°ë…ì„ ì°¾ì•„ë“œë¦½ë‹ˆë‹¤!
- ë‚˜ì™€ ê°€ì¥ ë‹®ì€ ê°ë…ì˜ ì˜í™” ì¤‘ ë‚´ ì·¨í–¥ì— ë”± ë§ëŠ” ì˜í™”ë¥¼ ì¶”ì²œí•´ë“œë ¤ìš”!
- ì¶”ì²œ ë°›ì€ ì˜í™”ë¥¼ ê°ìƒí•˜ë©´ ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ë‹¤ë¥¸ ì‚¬ëŒê³¼ í•¨ê»˜ ì˜í™”ì— ëŒ€í•œ ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆ ë³´ì„¸ìš”~

<br>

## 2ï¸âƒ£ ê¸°ì—¬ë„

### ğŸ”¸ Backend

<span>
<img src="https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=Python&logoColor=white">
<img src="https://img.shields.io/badge/Django-000000?style=for-the-badge&logo=Django&logoColor=white">
<img src="https://img.shields.io/badge/sqlite-003B57?style=for-the-badge&logo=sqlite&logoColor=white">
</span>

<br>

<span>
<img src="https://img.shields.io/badge/GitLab-FCA121?style=for-the-badge&logo=GitLab&logoColor=white">
<img src="https://img.shields.io/badge/Mattermost-0058CC?style=for-the-badge&logo=Mattermost&logoColor=white">
<img src="https://img.shields.io/badge/visual studio code-007ACC?style=for-the-badge&logo=visualstudiocode&logoColor=white">
</span>

> ì˜í™” ì¶”ì²œ ì•„ì´ë””ì–´ ê¸°íšê³¼ êµ¬í˜„ì„ í¬í•¨í•œ Backend ì—…ë¬´ë¥¼ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤.  
> ì‚¬ìš©ìê°€ ê°„ë‹¨í•œ ì„¤ë¬¸ì„ ì§„í–‰í•˜ë©´ ë¹„ìŠ·í•œ ì„±í–¥ì˜ ì˜í™” ê°ë…ì„ ì°¾ì•„ë‚´ê³ , í•´ë‹¹ ì˜í™” ê°ë…ì˜ ì‘í’ˆ ì¤‘ì—ì„œ ì‚¬ìš©ìê°€ ê´€ëŒí•œ ì˜í™” ë°ì´í„°ë¥¼ ë¶„ì„í•´ì„œ ì„ í˜¸í•˜ëŠ” ì¥ë¥´ì˜ ì‘í’ˆì„ ì¶”ì²œí•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

#### â—¼ ê¸°íš

â—½ ì˜í™” ì¶”ì²œ 

#### â—¼ ì„¤ê³„

â—½ ERD ì‘ì„±

â—½ Components ì„¤ê³„

â—½ Routes ì„¤ê³„

#### â—¼ ê°œë°œ

â—½ REST API êµ¬ì¶•

â—½ Open API í™œìš©

â—½ RDBMS ê´€ë¦¬

â—½ ì˜í™” ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜

<br>

## 3ï¸âƒ£ ì„¤ê³„

### ğŸ”¸ ERD

![erd](assets/erd.png)

### ğŸ”¸ Components & Routes êµ¬ì¡°

![front](assets/front.png)

<br>

## 4ï¸âƒ£ ì‹œì—°

### ğŸ‘‡Click!

[![ì‹œì—°ì˜ìƒ](assets/ë¡œê³ .png)](https://youtu.be/ALXX5F6ty6w) 

0:00 - ë©”ì¸í˜ì´ì§€ & ìƒì„¸í˜ì´ì§€

0:18 - ë¡œê·¸ì¸

0:25 - ì˜í™” í‰ì  ê¸°ëŠ¥

0:44 - í”„ë¡œí•„ í™”ë©´

0:56 - íšŒì›ê°€ì…

1:08 - ì‚¬ìš©ìë“¤ì˜ í‰ê·  í‰ì  ì œê³µ

1:26 - ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥

2:13 - íŒ”ë¡œìš° ê¸°ëŠ¥

2:17 - ì˜í™” ì¶”ì²œ ì„œë¹„ìŠ¤ ê¸°ëŠ¥

<br>

## 5ï¸âƒ£ ê°œë°œì

| ì´ë¦„ | ì—­í•  |
| --- | --- |
| ğŸ‘©ë§ˆì£¼ë¦¬ | Frontend |
| ğŸ‘¨ì´ì¢…ì€ (me) | Backend |

<br>

## 6ï¸âƒ£ íšŒê³ 

### ğŸ”¸ í•µì‹¬ê¸°ëŠ¥

<details>
<summary>TMDB API ë°ì´í„° ê°€ê³µ</summary>
  
TMDB APIëŠ” ì˜í™”ì˜ ì¥ë¥´ ì •ë³´ë¥¼ `Integer`ê°€ ë‹´ê¸´ `List`ë¡œ ì œê³µí•˜ê³  ìˆë‹¤. ì‚¬ìš©ìì—ê²Œ `Integer`ê°€ ì•„ë‹Œ í•œê¸€ë¡œ ì¥ë¥´ ì •ë³´ë¥¼ ì œê³µí•˜ê³ ì ì•„ë˜ì™€ ê°™ì´ `Integer(Key)` : `String(Value)` êµ¬ì¡°ì˜ `genres_dict(Dictionary)`ë¥¼ ë§Œë“¤ì–´ í™œìš©í–ˆë‹¤.
  
```python
genres_dict = {
    28: 'ì•¡ì…˜',
    12: 'ëª¨í—˜',
    16: 'ì• ë‹ˆë©”ì´ì…˜',
    35: 'ì½”ë¯¸ë””',
    80: 'ë²”ì£„',
    ...(ì´í•˜ ìƒëµ)...
}
``` 

<br>

ì˜í™” ì¶œì—°ì§„ê³¼ ì œì‘ì§„ì„ ì‘ë‹µìœ¼ë¡œ ì£¼ëŠ” Pathë¡œ ìš”ì²­ì„ ë³´ë‚´ ì˜í™” ê°ë… ì´ë¦„ì„ êµ¬í•˜ê³ , ì´ë¥¼ `movie_director`ì— í• ë‹¹í•œë‹¤. ë§ˆì§€ë§‰ì— genreì™€ directorì— ê°’ì„ ë„£ê³ , save!

```python
# movieì˜ idê°’ìœ¼ë¡œ TMDB credits path ìš”ì²­í•´ì„œ ê°ë… ì´ë¦„ êµ¬í•˜ê¸°
GET_CREDITS_PATH = f'/movie/{movie_data["id"]}/credits'
response_credits = requests.get(URL+GET_CREDITS_PATH, params=params)
response_credits_json = response_credits.json()

# ì˜í™” ì œì‘ì ëª…ë‹¨ì¸ creditsì˜ ì†ì„± crewì˜ ê°’ì„ ë³€ìˆ˜í™” => crews_data
crews_data = response_credits_json['crew']

# ì§ì±…ì´ Directingì¸ crewì˜ ì´ë¦„ì„ director í•„ë“œì— ì €ì¥
for crew_data in crews_data:
    if crew_data['department'] == 'Directing':
        movie_director = crew_data['name']
        break

serializer.save(genre=movie_genres_json, director=movie_director)
```
</details>

<details>
<summary>ì‚¬ìš©ìì™€ ë¹„ìŠ·í•œ ì„±í–¥ì˜ ì˜í™” ê°ë… ì°¾ê¸°</summary>
  
ì‚¬ìš©ìê°€ ì œì¶œí•œ ì„¤ë¬¸ ê²°ê³¼ì¸ `request.data`ë¥¼ ìˆœíšŒí•˜ë©´ `Integer` ê°ì²´ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ `Value` ëª¨ë¸ì˜ `value_id`ë¡œ ì¡°íšŒí•˜ë©´ í•´ë‹¹í•˜ëŠ” ê°ë… ì´ë¦„ì„ ì°¾ì„ ìˆ˜ ìˆë‹¤. ê°€ì¥ ë§ì´ ì„ íƒëœ ê°ë…ì„ ì°¾ê³ , ê·¸ ê°ë…ì˜ ëª¨ë“  ì˜í™”(`director_movies`)ë¥¼ ì°¾ëŠ”ë‹¤.

```python
results = []
for value_id in request.data:
    value = get_object_or_404(Value, id=value_id)
    results.append(value.director)

recommendable_director = max(set(results), key=results.count)
director_movies = Movie.objects.all().filter(director=recommendable_director)
```
    
</details>

<details>
<summary>ì‚¬ìš©ìê°€ ë§ì´ ë³¸ ì¥ë¥´ ì°¾ê¸°</summary>
  
ì‚¬ìš©ìê°€ ê´€ëŒí•œ ì˜í™”ë¥¼ ìˆœíšŒí•˜ë©° ê´€ëŒí•œ ì¥ë¥´ë¥¼ íšŸìˆ˜ë¡œ ì§‘ê³„í•˜ê³ , ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬í•œë‹¤. ì´ëŠ” ê°ì²´ `favorite_genres`ì— í•´ë‹¹í•œë‹¤. `favorite_genres`ë¥¼ ìˆœíšŒí•˜ë©´ ì‚¬ìš©ìê°€ ê°€ì¥ ë§ì´ ë³¸ ì¥ë¥´ê°€ ìˆœì„œëŒ€ë¡œ ë‚˜ì˜¤ë©°, ì˜í™” ê°ë… ì‘í’ˆ ì¤‘ì— ì¼ì¹˜í•˜ëŠ” ì¥ë¥´ê°€ ìˆìœ¼ë©´ `recommendable_movie`ì— í• ë‹¹í•˜ê³ , ì´ë¥¼ ë°˜í™˜í•œë‹¤. ë§Œì•½ ë°˜ë³µë¬¸ì´ ëë‚  ë•Œê¹Œì§€ ì¼ì¹˜í•˜ëŠ” ì¥ë¥´ê°€ ì—†ìœ¼ë©´ ê°ë…ì˜ ì˜í™” ì¤‘ ë¬´ì‘ìœ„ë¡œ í•˜ë‚˜ì˜ ì˜í™”ë¥¼ ë°˜í™˜í•œë‹¤.

```python
# ì‚¬ìš©ìê°€ ë³¸ ì˜í™”ë¥¼ ìˆœíšŒ => ê° ì˜í™”ì˜ ì¥ë¥´ë¥¼ íŒŒì‹± => user_genresì— ì¹´ìš´íŠ¸
for movie in movies:
    genres = jsonDec.decode(movie.genre)
    for genre in genres:
        user_genres[genre] += 1

# user_genresì˜ valueê°€ ìˆëŠ” ê°’ë§Œ(ì‚¬ìš©ìê°€ ë³¸ ì¥ë¥´ë§Œ) íŠœí”Œ í˜•íƒœ(ì¥ë¥´, ì¹´ìš´íŠ¸)ë¡œ ë¦¬ìŠ¤íŠ¸ì— ë‹´ê³ , ì¹´ìš´íŠ¸ê°’ ê¸°ì¤€ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœ
favorite_genres = sorted(list(filter(lambda x: x[1], user_genres.items())), key=lambda x: x[1], reverse=True)

# ì‚¬ìš©ìê°€ ë§ì´ ë³¸ ì¥ë¥´ ê¸°ë°˜ìœ¼ë¡œ ì¶”ì²œ ê°ë…ì˜ í•´ë‹¹ ì¥ë¥´ ì˜í™”ê°€ ìˆëŠ” ì§€ íƒìƒ‰ 
for favorite_genre in favorite_genres:
    if director_movies.filter(genre__contains=favorite_genre[0]).exists():
        recommendable_movie = director_movies.filter(genre__contains=favorite_genre[0]).order_by('?').first()
        break

# ì¶”ì²œ ê°ë…ì˜ ì‘í’ˆ ì¤‘ì— ì‚¬ìš©ìê°€ ë³¸ ì¥ë¥´ê°€ ì—†ë‹¤ë©´ ê°ë…ì˜ ì „ì²´ ì‘í’ˆ ì¤‘ì—ì„œ ëœë¤ 
else:
    recommendable_movie = director_movies.order_by('?').first()

serializer = MovieDetailSerializer(recommendable_movie)
return Response(serializer.data)
```
    
</details>

<br>

### ğŸ”¸ ë¬¸ì œí•´ê²°

<details>
<summary>SQLite3 ë¦¬ìŠ¤íŠ¸ í•„ë“œ ì €ì¥í•˜ê¸°</summary>

SQLite3ëŠ” `List` ê°ì²´ë¥¼ ì €ì¥í•  ìˆ˜ ì—†ë‹¤. ê·¸ë ‡ì§€ë§Œ `List`ë¥¼ `JSON`ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ ì €ì¥í•˜ê³ ,  êº¼ë‚¼ ë• íŒŒì‹±í•˜ë©´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```python
# listê°ì²´ë¥¼ JSONìœ¼ë¡œ ë³€í™˜í•´ì„œ ì €ì¥í•˜ê³ , êº¼ë‚¼ ë• íŒŒì‹±í•´ì„œ ì‚¬ìš©í•œë‹¤.
movie_genres_json = json.dumps(movie_genres)
```
    
</details>

<details>
<summary>í•œ ë²ˆì˜ ì‘ì—…ìœ¼ë¡œ TMDB APIì— 3 ë²ˆì˜ ìš”ì²­ì„ ë³´ë‚´ê³ , DBì— ì €ì¥í•œ ë’¤ì— ìš”ì²­ì„ êµ¬ë¶„í•´ì„œ í•œ ë²ˆì— ì‘ë‹µí•˜ê¸°</summary>
  
Pathë³„ë¡œ ë°˜ë³µë¬¸ì„ ëŒë¦¬ë©´ì„œ TMDB APIì— ìš”ì²­ì„ ë³´ë‚¸ë‹¤. DBì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³ , ì €ì¥ì´ ëë‚˜ë©´ DBì—ì„œ í•´ë‹¹ ì˜í™”ê°€ ê°€ì§„ ìœ ì¼í•œ ì†ì„±-ê°’ìœ¼ë¡œ ë‹¤ì‹œ ì°¾ì•„ë‚¸ ë‹¤ìŒ ë¹ˆ `movies(List)`ì— ì±„ìš´ë‹¤. ê° Path ìš”ì²­ìœ¼ë¡œ ì±„ì›Œì§„ `movies(List)`ëŠ” ë§ˆì§€ë§‰ ì‘ë‹µìœ¼ë¡œ ë³´ë‚¼ `res(Dictionary)`ì— Path ì´ë¦„ì„ Keyê°’ìœ¼ë¡œ ê°€ì§€ëŠ” Valueë¡œ í• ë‹¹í•œë‹¤.
    
```python
GET_MOVIES_PATHS_DICT = {
    'now_playing': '/movie/now_playing',
    'upcoming': '/movie/upcoming',
    'popular': '/movie/popular',
}

res = {}

for GET_MOVIES_PATH_NAME, GET_MOVIES_PATH in GET_MOVIES_PATHS_DICT.items():
    response_movies = requests.get(URL+GET_MOVIES_PATH, params=params)
    response_movies_json = response_movies.json()
    movies_data = response_movies_json['results']

    movies = []
    # TMDB APIì—ì„œ ì‘ë‹µìœ¼ë¡œ ë°›ì€ ì˜í™”ë¥¼ í•˜ë‚˜ì”© ìˆœíšŒ
    for movie_data in movies_data:
          ...
                # DBì— ì €ì¥!
                serializer.save(genre=movie_genres_json, director=movie_director)
            
            # DBì— ì €ì¥í•˜ìë§ˆì moviesì— ë‹´ëŠ”ë‹¤.
            movie = get_object_or_404(Movie, title=movie_data['title'])
            serializer = MovieDetailSerializer(movie)
            movies.append(serializer.data)
            
    # ìµœì¢… ì‘ë‹µìœ¼ë¡œ ë³´ë‚¼ ë”•ì…”ë„ˆë¦¬ì— í•´ë‹¹í•˜ëŠ” Path ê°’ì˜ Valueë¡œ moviesë¥¼ í• ë‹¹í•œë‹¤.
    res[GET_MOVIES_PATH_NAME] = movies

return Response(res)
```
    
</details>

<br>

### ğŸ”¸ ì•„ì‰¬ìš´ì 

<details>
<summary>ì»¤ë®¤ë‹ˆí‹° ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥</summary>
ì»¤ë®¤ë‹ˆí‹°ì— ê²Œì‹œê¸€ì„ ì˜¬ë¦´ ë•Œ ì˜¤ì§ ê¸€ë§Œ ì˜¬ë¼ê°ˆ ìˆ˜ ìˆì–´ì„œ ì´ë¯¸ì§€ë„ ì¶”ê°€í•´ì„œ ì¢€ ë” ë‹¤ì–‘í•œ ì •ë³´ë“¤ì´ ì˜¤ê°ˆ ìˆ˜ ìˆë„ë¡ ê°œì„ í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.
</details>

<details>
<summary>ë§íŒ”ë¡œìš° ë°©ëª…ë¡ ê¸°ëŠ¥</summary>
ì—¬ë¡ ì¡°ì‚¬ì— ë”°ë¥´ë©´ ì‚¬ëŒë“¤ì€ ì£¼ë³€ ì§€ì¸, SNSì—ì„œ ì˜í™”ë¥¼ ì¶”ì²œ ë°›ëŠ” ê²½ìš°ê°€ ë§ì•˜ë‹¤. ì„œë¡œì˜ í”„ë¡œí•„ í˜ì´ì§€ì— ë°©ëª…ë¡ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ë©´ ì‚¬ìš©ìë¼ë¦¬ ë³´ë‹¤ ì ê·¹ì ì¸ ì˜í™” ì¶”ì²œì´ ì´ë£¨ì–´ì§ˆ ê²ƒ ê°™ë‹¤.
</details>

<a href="#moodle-ë‹¹ì‹ ë§Œì˜-ì˜í™”-ê°ë…ì„-ì°¾ì•„ë³´ì„¸ìš”">âë§¨ ìœ„ë¡œ</a>
