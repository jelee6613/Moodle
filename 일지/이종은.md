# 영화 추천 웹사이트 PJT



## Developers

- 마주리
- 이종은



## 220517 (1일차)

1. 프로젝트 명세 작성
   - 사용자에게 어떤 서비스와 정보를 제공할 것인지를 담은 기능 요구사항을 목록화했다.
   - 사용자에게 간단한 설문을 제공해서 가치관, 성향이 비슷하거나 흥미가 가는 감독을 찾도록 유도한다. 해당 감독의 작품 중에서 사용자가 그간 평가한 영화 정보를 기반으로 새로운 영화를 추천해주는 알고리즘을 구현하기로 했다.
2. ERD 다이어그램을 이용한 모델링



## 220518 (2일차)

1. 알고리즘을 위한 quiz 모델 추가
   사용자가 감독을 찾고 나서 사용자가 그간 평가한 영화 정보를 어떻게 참고할지 고민이었다. 예를 들어 선정된 감독의 작품 중에서 사용자가 그동안 가장 많이 본 영화 장르의 작품을 추천해준다고 하면, 가장 많이 본 영화 장르를 어떻게 구현할 지 고민이었는데, 주리님의 도움으로 `group_by`를 알게 됐다.
2. URL, 컴포넌트 구상, 기록



## 220519 (3일차)

1. back
   1. 모델링
      두 모델의 id값을 갖는 M:N 테이블에 필드를 커스텀하기 위해 through 속성 이용 
      생성될 테이블을 미리 선언해서 추가하고 싶은 필드를 작성하고, ManyToManyField에 through='미리 선언한 테이블명' 속성 부여
   2. urls, views 구조 잡기
      articles, movies 앱의 urls, views 구조 잡기
2. front
   1. router 설정
      각 router마다 연결되는 view를 매칭
   2. view, components 구조 잡기
      각 view마다 하위컴포넌트 구조 잡기
   3. drf.js 작성
      프론트에서 백에 요청 보내거나 router 설정 건들 때, 쓰일 링크를 정리



## 220520 (4일차)

1. back

   1. cors & auth

      - 처음으로 client와 server 프레임워크를 구분해서 진행하는 프로젝트다. 그러기 위해서 동일 origin이 아니어도 원활한 요청과 응답이 이루어지도록 CORS 세팅을 한다. (3rd party app 설치, settings.py 수정)
      - token 정보를 기반으로 login, logout, signup 기능(urls & views)을 구현하기 위해 auth 설정을 할 수 있다. (3rd party apps 설치, settings.py 수정, 프로젝트 urls.py 포워딩)

   2. 전체 영화 조회 & 영화 추가

     - 전체 영화 목록을 Client에 출력하기 위해 Server에 GET으로 요청하면 응답하는 url & view에 POST로 요청이 들어오면 Server DB에 영화를 추가할 수 있도록 구현하고자 했다. 포스트맨으로 테스트할 땐 오픈 API에서 데이터를 잘가져왔는데 django에서 requests.get 요청하는데 유효하지 않은 key값 error, UnicodeDecode Error가 번갈아가며 나왔다.

       - 유효하지 않은 key값 : get 요청 보낼때 params로 넘겨야하는데 headers로 넘겼었다. params 인자로 넘기니 문제 해결

       - UnicodeDecode Error : requests.get 요청으로 받은 response 응답 결과는 <Response [200]> 객체일 뿐이고, .json() 메소드로 해결

         ```python
         response = requests.get(url, params=params)  # headers X, params O
                 data = response.json()
                 return Response(data)  # response X, data O
         ```

         

2. front

   1. pk => id
      라우터로 넘길때 라우팅인자가 계속 undefined였는데 movie.pk가 아니라 movie.id였다.
